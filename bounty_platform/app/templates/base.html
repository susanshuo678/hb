<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}çº¢ç™½æ‚¬èµ V3{% endblock %}</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { min-height: 100vh; background-color: #f4f6f9; display: flex; }
        #sidebar { min-width: 250px; background: #343a40; color: #fff; display: flex; flex-direction: column; }
        #sidebar a { color: #c2c7d0; text-decoration: none; padding: 10px 20px; display: block; }
        #sidebar a:hover { background: #494e53; color: white; }
        #content { width: 100%; padding: 20px; }
        @media (max-width: 768px) { #sidebar { display: none; } }
    </style>
    {% block head %}{% endblock %}
</head>
<body>
    {% if user and user.is_admin %}
    <nav id="sidebar">
        <div class="p-3 border-bottom border-secondary"><h3>ğŸ¦„ V3 Admin</h3></div>
        <a href="/admin/dashboard"><i class="fas fa-chart-line me-2"></i> æ•°æ®çœ‹æ¿</a>
        <a href="/admin/materials"><i class="fas fa-images me-2"></i> ç´ æCMS</a>
        <a href="/admin/audit"><i class="fas fa-check-circle me-2"></i> ä»»åŠ¡å®¡æ ¸</a>
        <a href="/admin/users"><i class="fas fa-users me-2"></i> ä¼šå‘˜é£æ§</a>
        <div class="mt-auto p-3"><a href="/logout" class="btn btn-danger w-100">é€€å‡º</a></div>
    </nav>
    {% endif %}
    <div id="content">
        {% block content %}{% endblock %}
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        function apiPost(url, data, cb) {
            $.post(url, data, function(res) {
                if(res.code===200) { Swal.fire('æˆåŠŸ', res.message, 'success').then(cb); }
                else { Swal.fire('å¤±è´¥', res.message, 'error'); }
            });
        }
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>